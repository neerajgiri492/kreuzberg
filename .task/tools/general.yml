version: "3"

includes:
  _cfg:
    taskfile: ../config/vars.yml
    internal: true

tasks:
  toml:format:
    desc: Format TOML files with taplo
    cmds:
      - cmd: scripts/toml_format.sh
        platforms: [linux, darwin]
      - cmd: bash scripts/toml_format.sh
        platforms: [windows]

  toml:format:check:
    desc: Check TOML formatting without modifications
    cmds:
      - cmd: scripts/toml_format.sh --check
        platforms: [linux, darwin]
      - cmd: bash scripts/toml_format.sh --check
        platforms: [windows]

  shell:lint:
    desc: Lint shell scripts with auto-fix (shfmt + shellcheck)
    cmds:
      - cmd: bash scripts/task/shell-lint.sh fix
        platforms: [linux, darwin]
      - cmd: echo "Shell linting not available on Windows - shell scripts are Unix-specific"
        platforms: [windows]

  shell:lint:check:
    desc: Lint shell scripts in check-only mode (shfmt + shellcheck)
    cmds:
      - cmd: bash scripts/task/shell-lint.sh check
        platforms: [linux, darwin]
      - cmd: echo "Shell linting not available on Windows - shell scripts are Unix-specific"
        platforms: [windows]

  github:lint:
    desc: Lint GitHub Actions workflows (actionlint)
    cmds:
      - cmd: actionlint
        ignore_error: true
